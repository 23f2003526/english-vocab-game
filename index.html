<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Class 6 English Vocabulary Quiz</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');

  body {
    margin: 0;
    background: linear-gradient(135deg, #A1C4FD 0%, #C2E9FB 100%);
    font-family: 'Comic Neue', cursive, sans-serif;
    display: flex;
    height: 100vh;
    justify-content: center;
    align-items: center;
    padding: 20px;
    overflow-x: hidden;
  }

  #quiz-container {
    background: #ffffffdd;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    max-width: 450px;
    width: 100%;
    padding: 30px 25px 40px 25px;
    display: flex;
    flex-direction: column;
    align-items: center;
    user-select: none;
    position: relative;
    z-index: 1;
  }

  #title {
    font-size: 2.4rem;
    margin-bottom: 25px;
    color: #1976d2;
    text-shadow: 1px 1px 3px #ade1fc;
  }

  #question {
    font-size: 1.3rem;
    margin-bottom: 25px;
    text-align: center;
    min-height: 60px;
  }

  .options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    width: 100%;
    margin-bottom: 25px;
  }

  .option-btn {
    background: #f0f7ff;
    border: 3px solid #1976d2;
    border-radius: 12px;
    font-weight: 700;
    color: #1976d2;
    cursor: pointer;
    padding: 12px 10px;
    font-size: 1.1rem;
    transition: 0.3s all ease;
    position: relative;
    overflow: hidden;
    user-select: none;
  }
  .option-btn:hover:not(.disabled) {
    background-color: #d0e6ff;
    transform: scale(1.05);
  }
  .option-btn:active:not(.disabled) {
    transform: scale(0.97);
  }

  .option-btn.correct {
    background: #4caf50;
    border-color: #4caf50;
    color: #fff;
  }
  .option-btn.incorrect {
    background: #e53935;
    border-color: #e53935;
    color: #fff;
  }
  .option-btn.disabled {
    cursor: default;
    pointer-events: none;
  }

  #feedback {
    font-size: 1.3rem;
    font-weight: 700;
    min-height: 45px;
    margin-bottom: 15px;
    text-align: center;
    color: #444;
    user-select: none;
  }

  #score {
    font-size: 1.1rem;
    color: #1976d2;
    font-weight: 700;
    margin-bottom: 15px;
  }

  #next-btn {
    background: #1976d2;
    border: none;
    border-radius: 12px;
    color: white;
    font-weight: 700;
    font-size: 1.2rem;
    padding: 10px 25px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
    display: none;
  }
  #next-btn:hover {
    background: #155a9c;
  }
  #next-btn:disabled {
    background: #9999a1;
    cursor: default;
  }

  /* Confetti Canvas */
  #confetti-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 1000;
  }

  /* Sad animation container */
  #sad-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 1001;
    display: none;
    user-select: none;
  }

  /* Sad face style */
  #sad-face {
    width: 80px;
    height: 80px;
  }

  /* Sad face eyes and mouth animation */
  .eye {
    animation: blink 4s infinite;
  }

  .mouth-sad {
    stroke: #e53935;
    stroke-width: 4;
    fill: transparent;
  }

  @keyframes blink {
    0%, 10%, 20%, 30%, 100% {
      transform: scaleY(1);
    }
    15%, 25% {
      transform: scaleY(0.1);
    }
  }
</style>
</head>
<body>
  <canvas id="confetti-canvas"></canvas>
  <div id="sad-container" aria-live="polite" role="img" aria-label="Sad face">
    <svg id="sad-face" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <circle cx="32" cy="32" r="30" fill="#fdecea" stroke="#e53935" stroke-width="4"/>
      <ellipse class="eye" cx="20" cy="25" rx="5" ry="8" fill="#e53935" />
      <ellipse class="eye" cx="44" cy="25" rx="5" ry="8" fill="#e53935" />
      <path class="mouth-sad" d="M20 45 Q32 35 44 45" />
    </svg>
  </div>

  <div id="quiz-container" role="main" aria-live="polite" aria-atomic="true" aria-label="English vocabulary quiz">
    <div id="title">English Vocabulary Quiz</div>
    <div id="score" aria-live="polite" aria-atomic="true"></div>
    <div id="question" tabindex="0"></div>
    <div class="options"></div>
    <div id="feedback" aria-live="assertive"></div>
    <button id="next-btn" aria-label="Next question">Next</button>
  </div>

<script>
(() => {
  const quizData = [
    {
      question: "What is the opposite of 'happy'?",
      options: ["Cheerful", "Sad", "Brave", "Smart"],
      answerIndex: 1
    },
    {
      question: "Choose the correct meaning of 'enormous'.",
      options: ["Very small", "Huge", "Fast", "Funny"],
      answerIndex: 1
    },
    {
      question: "Select the synonym of 'quick'.",
      options: ["Slow", "Fast", "Lazy", "Tired"],
      answerIndex: 1
    },
    {
      question: "What does 'ancient' mean?",
      options: ["Very old", "New", "Expensive", "Heavy"],
      answerIndex: 0
    },
    {
      question: "Choose the word that means 'to jump high'.",
      options: ["Run", "Hop", "Fly", "Fall"],
      answerIndex: 1
    }
  ];

  const quizContainer = document.getElementById('quiz-container');
  const questionEl = document.getElementById('question');
  const optionsEl = quizContainer.querySelector('.options');
  const feedbackEl = document.getElementById('feedback');
  const nextBtn = document.getElementById('next-btn');
  const scoreEl = document.getElementById('score');
  const confettiCanvas = document.getElementById('confetti-canvas');
  const sadContainer = document.getElementById('sad-container');

  let currentQuestion = 0;
  let score = 0;
  let animationRunning = false;

  function updateScore() {
    scoreEl.textContent = `Score: ${score} / ${quizData.length}`;
  }

  function clearFeedback() {
    feedbackEl.textContent = '';
    feedbackEl.style.color = '#444';
  }

  function loadQuestion() {
    clearFeedback();
    nextBtn.style.display = 'none';
    const q = quizData[currentQuestion];
    questionEl.textContent = q.question;
    optionsEl.innerHTML = '';
    q.options.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'option-btn';
      btn.textContent = opt;
      btn.dataset.index = i;
      btn.setAttribute('aria-label', `Answer option ${i+1}: ${opt}`);
      btn.addEventListener('click', () => selectOption(btn, i));
      optionsEl.appendChild(btn);
    });
    updateScore();
    questionEl.focus();
  }

  function disableOptions() {
    const btns = optionsEl.querySelectorAll('.option-btn');
    btns.forEach(b => b.classList.add('disabled'));
  }

  // Confetti implementation adapted and simplified from open source approaches
  class ConfettiParticle {
    constructor(x, y, ctx, colors) {
      this.x = x;
      this.y = y;
      this.ctx = ctx;
      this.colors = colors;
      this.size = (Math.random() * 7) + 7;
      this.weight = (Math.random() * 0.5) + 0.7;
      this.angle = Math.random() * 2 * Math.PI;
      this.spin = (Math.random() - 0.5) * 0.2;
      this.color = this.colors[Math.floor(Math.random() * this.colors.length)];
      this.tilt = Math.random() * 10 - 10;
      this.tiltSpeed = (Math.random() * 0.12) + 0.05;
      this.opacity = 1;
      this.life = 100;
    }
    update() {
      this.y += this.weight;
      this.x += Math.sin(this.angle) * 2;
      this.angle += this.spin;
      this.tilt += this.tiltSpeed;
      this.opacity -= 0.008;
      this.life--;
    }
    draw() {
      this.ctx.beginPath();
      this.ctx.lineWidth = this.size / 2;
      this.ctx.strokeStyle = `rgba(${this.color},${this.opacity.toFixed(2)})`;
      this.ctx.moveTo(this.x + this.tilt, this.y);
      this.ctx.lineTo(this.x, this.y + this.tilt + (this.size / 2));
      this.ctx.stroke();
    }
    alive() {
      return this.opacity > 0 && this.life > 0;
    }
  }

  class Confetti {
    constructor(canvas) {
      this.canvas = canvas;
      this.ctx = canvas.getContext('2d');
      this.particles = [];
      this.colors = [
        '255, 0, 0',       // red
        '0, 255, 0',       // green
        '0, 0, 255',       // blue
        '255, 255, 0',     // yellow
        '255, 0, 255',     // magenta
        '0, 255, 255'      // cyan
      ];
      this.animating = false;
      this.resize();
      window.addEventListener('resize', () => this.resize());
    }
    resize() {
      this.canvas.width = window.innerWidth;
      this.canvas.height = window.innerHeight;
    }
    start() {
      this.animating = true;
      this.particles = [];
      // generate initial confetti burst
      const count = 150;
      for (let i = 0; i < count; i++) {
        const x = Math.random() * this.canvas.width;
        const y = Math.random() * this.canvas.height/2;
        this.particles.push(new ConfettiParticle(x, y, this.ctx, this.colors));
      }
      this.animate();
    }
    animate() {
      if (!this.animating) return;
      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
      this.particles.forEach(p => {
        p.update();
        p.draw();
      });
      this.particles = this.particles.filter(p => p.alive());
      if (this.particles.length > 0) {
        requestAnimationFrame(() => this.animate());
      } else {
        this.animating = false;
        confettiCanvas.style.display = 'none';
      }
    }
    trigger() {
      if (this.animating) return;
      confettiCanvas.style.display = 'block';
      this.start();
    }
  }

  const confetti = new Confetti(confettiCanvas);

  function showSadAnimation() {
    if (animationRunning) return;
    animationRunning = true;
    sadContainer.style.display = 'block';
    // Animate fadeout after 2.5s
    sadContainer.style.opacity = '1';
    setTimeout(() => {
      sadContainer.style.transition = 'opacity 1s ease';
      sadContainer.style.opacity = '0';
    }, 2500);
    setTimeout(() => {
      sadContainer.style.transition = '';
      sadContainer.style.display = 'none';
      sadContainer.style.opacity = '1';
      animationRunning = false;
    }, 3500);
  }

  function selectOption(button, index) {
    if (animationRunning) return;
    disableOptions();
    const correctIndex = quizData[currentQuestion].answerIndex;
    if (index === correctIndex) {
      button.classList.add('correct');
      feedbackEl.textContent = "Correct! 🎉";
      feedbackEl.style.color = "#4caf50";
      score++;
      updateScore();
      confetti.trigger();
    } else {
      button.classList.add('incorrect');
      // Mark correct answer
      const correctBtn = optionsEl.querySelector(`.option-btn[data-index="${correctIndex}"]`);
      if(correctBtn) correctBtn.classList.add('correct');
      feedbackEl.textContent = "Oops! That's not right.";
      feedbackEl.style.color = "#e53935";
      showSadAnimation();
    }
    nextBtn.style.display = currentQuestion < quizData.length - 1 ? 'inline-block' : 'inline-block';
    nextBtn.focus();
  }

  nextBtn.addEventListener('click', () => {
    currentQuestion++;
    if (currentQuestion < quizData.length) {
      loadQuestion();
    } else {
      showFinalResults();
    }
  });

  function showFinalResults() {
    quizContainer.innerHTML = `
      <div id="title">Quiz Complete!</div>
      <div id="score" aria-live="polite">Your final score is ${score} out of ${quizData.length}.</div>
      <div style="font-size:1.4rem; font-weight:700; margin-top:15px; text-align:center; color:#1976d2;">
        ${score === quizData.length ? "Excellent! You got all correct! 🎉🎉🎉" :
          score >= quizData.length/2 ? "Good job! Keep practicing! 👍" :
          "Don't worry, try again to improve. 💪"}
      </div>
    `;
  }

  loadQuestion();
})();

</script>

</body>
</html>