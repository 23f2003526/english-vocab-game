<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Class 6 English Vocabulary Quiz</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');

  body {
    margin: 0;
    background: linear-gradient(135deg, #A1C4FD 0%, #C2E9FB 100%);
    font-family: 'Comic Neue', cursive, sans-serif;
    display: flex;
    height: 100vh;
    justify-content: center;
    align-items: center;
    padding: 20px;
    overflow-x: hidden;
  }

  #quiz-container {
    background: #ffffffdd;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    max-width: 450px;
    width: 100%;
    padding: 30px 25px 40px 25px;
    display: flex;
    flex-direction: column;
    align-items: center;
    user-select: none;
    position: relative;
    z-index: 1;
    min-height: 460px;
  }

  #title {
    font-size: 2.4rem;
    margin-bottom: 25px;
    color: #1976d2;
    text-shadow: 1px 1px 3px #ade1fc;
  }

  #score {
    font-size: 1.1rem;
    font-weight: 700;
    color: #1565c0;
    margin-bottom: 15px;
  }

  #question {
    font-size: 1.3rem;
    margin-bottom: 25px;
    text-align: center;
    min-height: 70px;
  }

  .options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    width: 100%;
    margin-bottom: 25px;
  }

  .option-btn {
    background: #f0f7ff;
    border: 3px solid #1976d2;
    border-radius: 12px;
    font-weight: 700;
    color: #1976d2;
    cursor: pointer;
    padding: 12px 10px;
    font-size: 1.1rem;
    transition: 0.3s all ease;
    position: relative;
    overflow: hidden;
    user-select: none;
  }
  .option-btn:hover:not(.disabled) {
    background-color: #d0e6ff;
    transform: scale(1.05);
  }
  .option-btn:active:not(.disabled) {
    transform: scale(0.97);
  }

  .option-btn.correct {
    background: #4caf50;
    border-color: #4caf50;
    color: #fff;
  }
  .option-btn.incorrect {
    background: #e53935;
    border-color: #e53935;
    color: #fff;
  }
  .option-btn.disabled {
    cursor: default;
    pointer-events: none;
    opacity: 0.85;
  }

  #next-btn, #start-btn, #restart-btn {
    background: #1976d2;
    border: none;
    border-radius: 12px;
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    padding: 12px 30px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #next-btn:hover:not(:disabled), #start-btn:hover, #restart-btn:hover {
    background-color: #125ea9;
  }
  #next-btn:disabled {
    background-color: #90caf9;
    cursor: default;
  }

  #summary {
    font-size: 1.2rem;
    color: #1976d2;
    margin-top: 15px;
    font-weight: 700;
    text-align: center;
  }

  /* Confetti canvas */
  #confetti-canvas {
    position: fixed;
    pointer-events: none;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 1000;
  }

  /* Sad face container */
  #sad-face {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120px;
    height: 120px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 900;
  }
  #sad-face svg {
    width: 100%;
    height: 100%;
    fill: none;
    stroke: #e53935;
    stroke-width: 5;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

</style>
</head>
<body>
  <canvas id="confetti-canvas" aria-hidden="true"></canvas>

  <div id="quiz-container" role="main" aria-labelledby="title">
    <h1 id="title">English Vocabulary Quiz</h1>
    <div id="score" aria-live="polite" aria-atomic="true">Score: 0/0</div>
    <div id="question" tabindex="0"></div>
    <div class="options" role="list" aria-label="Answer choices"></div>
    <button id="next-btn" disabled aria-label="Next question">Next</button>
    <button id="start-btn" style="display:none;">Start New Round</button>
    <button id="restart-btn" style="display:none;">Restart Quiz</button>
    <div id="summary" aria-live="polite" aria-atomic="true"></div>

    <div id="sad-face" aria-hidden="true">
      <svg viewBox="0 0 64 64" aria-hidden="true" focusable="false">
        <circle cx="32" cy="32" r="30" stroke="#e53935" fill="#fdecea"/>
        <circle cx="20" cy="25" r="5" fill="#e53935"/>
        <circle cx="44" cy="25" r="5" fill="#e53935"/>
        <path d="M20 45 Q32 35 44 45" stroke="#e53935" stroke-width="4" fill="none" />
      </svg>
    </div>
  </div>

<script>
(() => {
  // Full question bank (minimum 20 questions)
  const questionBank = [
    {
      question: "What does 'benevolent' mean?",
      options: ["Kind and generous", "Angry", "Very small", "Very old"],
      answer: 0,
    },
    {
      question: "Which word is a synonym for 'happy'?",
      options: ["Sad", "Joyful", "Tired", "Hungry"],
      answer: 1,
    },
    {
      question: "What is the meaning of 'enormous'?",
      options: ["Tiny", "Very big", "Colorful", "Smooth"],
      answer: 1,
    },
    {
      question: "Which word means the opposite of 'difficult'?",
      options: ["Easy", "Hard", "Long", "Noisy"],
      answer: 0,
    },
    {
      question: "Choose the correct meaning of 'fragile'.",
      options: ["Strong", "Delicate", "Heavy", "Bright"],
      answer: 1,
    },
    {
      question: "What does 'rapid' mean?",
      options: ["Slow", "Fast", "Late", "Early"],
      answer: 1,
    },
    {
      question: "Which word describes a feeling of fear?",
      options: ["Brave", "Anxious", "Excited", "Bored"],
      answer: 1,
    },
    {
      question: "What is a synonym of 'glimpse'?",
      options: ["Look quickly", "Listen carefully", "Touch slowly", "Run fast"],
      answer: 0,
    },
    {
      question: "Which word means 'to walk slowly'?",
      options: ["Dash", "Stroll", "Run", "Jump"],
      answer: 1,
    },
    {
      question: "Choose the best meaning of 'ancient'.",
      options: ["Very old", "Brand new", "Big", "Small"],
      answer: 0,
    },
    {
      question: "What does 'gigantic' mean?",
      options: ["Small", "Huge", "Noisy", "Quiet"],
      answer: 1,
    },
    {
      question: "Which word means 'extremely tired'?",
      options: ["Energetic", "Exhausted", "Happy", "Bored"],
      answer: 1,
    },
    {
      question: "What word means 'very cold'?",
      options: ["Hot", "Warm", "Chilly", "Bright"],
      answer: 2,
    },
    {
      question: "Choose the opposite of 'bright'.",
      options: ["Dark", "Light", "Shiny", "Luminous"],
      answer: 0,
    },
    {
      question: "What is the meaning of 'cautious'?",
      options: ["Careful", "Reckless", "Happy", "Lazy"],
      answer: 0,
    },
    {
      question: "Which word means 'to jump high'?",
      options: ["Hop", "Slide", "Dive", "Climb"],
      answer: 0,
    },
    {
      question: "What does 'delicious' describe?",
      options: ["Food taste", "Weather", "Sound", "Clothes"],
      answer: 0,
    },
    {
      question: "Choose the best meaning of 'brave'.",
      options: ["Cowardly", "Fearless", "Sad", "Lazy"],
      answer: 1,
    },
    {
      question: "Which word means 'a place to read books'?",
      options: ["Library", "Gym", "Cafeteria", "Playground"],
      answer: 0,
    },
    {
      question: "What is a synonym of 'quickly'?",
      options: ["Slowly", "Rapidly", "Quietly", "Loudly"],
      answer: 1,
    },
    // Add more questions here if desired
  ];

  const totalQuestionsPerRound = 5;

  const quizContainer = document.getElementById('quiz-container');
  const questionEl = document.getElementById('question');
  const optionsEl = document.querySelector('.options');
  const scoreEl = document.getElementById('score');
  const nextBtn = document.getElementById('next-btn');
  const startBtn = document.getElementById('start-btn');
  const restartBtn = document.getElementById('restart-btn');
  const summaryEl = document.getElementById('summary');
  const sadFaceEl = document.getElementById('sad-face');
  const confettiCanvas = document.getElementById('confetti-canvas');

  let currentQuestionIndex = 0;
  let score = 0;
  let currentQuestions = [];

  function shuffleArray(arr) {
    for (let i = arr.length -1; i > 0; i--) {
      const j = Math.floor(Math.random()*(i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  function pickRandomQuestions() {
    const questionsCopy = questionBank.slice();
    shuffleArray(questionsCopy);
    // select first 5 questions
    currentQuestions = questionsCopy.slice(0, totalQuestionsPerRound);
  }

  function resetState() {
    nextBtn.disabled = true;
    summaryEl.textContent = '';
    startBtn.style.display = 'none';
    restartBtn.style.display = 'none';
    sadFaceEl.style.opacity = 0;
    optionsEl.innerHTML = '';
  }

  function updateScore() {
    scoreEl.textContent = `Score: ${score}/${currentQuestionIndex}`;
  }

  function showQuestion() {
    resetState();
    const q = currentQuestions[currentQuestionIndex];
    questionEl.textContent = q.question;
    questionEl.focus();

    q.options.forEach((option, i) => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = option;
      btn.setAttribute('role', 'listitem');
      btn.setAttribute('aria-label', `Option ${i + 1}: ${option}`);
      btn.dataset.index = i;
      btn.type = "button";
      btn.addEventListener('click', selectAnswer);
      optionsEl.appendChild(btn);
    });
  }

  function selectAnswer(e) {
    const selectedBtn = e.target;
    const selectedIndex = Number(selectedBtn.dataset.index);
    const correctIndex = currentQuestions[currentQuestionIndex].answer;

    if (selectedBtn.classList.contains('disabled')) return;

    // Disable all buttons
    Array.from(optionsEl.children).forEach(btn => {
      btn.classList.add('disabled');
      btn.setAttribute('aria-disabled', 'true');
    });

    if (selectedIndex === correctIndex) {
      selectedBtn.classList.add('correct');
      score++;
      updateScore();
      triggerConfetti();
    } else {
      selectedBtn.classList.add('incorrect');
      // highlight correct answer
      const correctBtn = optionsEl.querySelector(`button[data-index="${correctIndex}"]`);
      if (correctBtn) {
        correctBtn.classList.add('correct');
      }
      updateScore();
      triggerSadFace();
    }
    nextBtn.disabled = false;
    nextBtn.focus();
  }

  function showSummary() {
    questionEl.textContent = '';
    optionsEl.innerHTML = '';
    scoreEl.textContent = `Final Score: ${score}/${currentQuestions.length}`;

    let message = '';
    const percent = (score / currentQuestions.length) * 100;
    if (percent === 100) {
      message = "Excellent! You got all correct! ðŸŒŸ";
    } else if (percent >= 80) {
      message = "Great job! Keep it up! ðŸ‘";
    } else if (percent >= 50) {
      message = "Good effort! Practice makes perfect! ðŸ™‚";
    } else {
      message = "Don't worry! Try again and you'll improve! ðŸ’ª";
    }

    summaryEl.textContent = message;

    nextBtn.style.display = 'none';
    restartBtn.style.display = 'inline-block';
    restartBtn.focus();
  }

  nextBtn.addEventListener('click', () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < currentQuestions.length) {
      showQuestion();
    } else {
      showSummary();
    }
  });

  restartBtn.addEventListener('click', () => {
    startNewRound();
  });

  startBtn.addEventListener('click', () => {
    startNewRound();
  });

  function startNewRound() {
    score = 0;
    currentQuestionIndex = 0;
    pickRandomQuestions();
    updateScore();

    nextBtn.style.display = 'inline-block';
    nextBtn.disabled = true;
    startBtn.style.display = 'none';
    restartBtn.style.display = 'none';
    summaryEl.textContent = '';

    showQuestion();
  }

  // Initialize first round on page load
  startNewRound();

  // Accessibility enhancement: support keyboard navigation on options
  optionsEl.addEventListener('keydown', (e) => {
    if (e.target.classList.contains('option-btn')) {
      let index = Array.from(optionsEl.children).indexOf(e.target);
      if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
        e.preventDefault();
        let nextIndex = (index + 1) % optionsEl.children.length;
        optionsEl.children[nextIndex].focus();
      } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
        e.preventDefault();
        let prevIndex = (index + optionsEl.children.length - 1) % optionsEl.children.length;
        optionsEl.children[prevIndex].focus();
      }
    }
  });

  // Confetti implementation
  const confettiCtx = confettiCanvas.getContext('2d');
  let confettiPieces = [];
  let confettiRunning = false;

  const confettiColors = [
    "#4caf50",
    "#1976d2",
    "#e53935",
    "#ffb300",
    "#8e24aa",
  ];

  class ConfettiPiece {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.size = 8 + Math.random() * 6;
      this.color = confettiColors[Math.floor(Math.random() * confettiColors.length)];
      this.tilt = Math.random() * 10 - 10;
      this.tiltAngle = 0;
      this.tiltAngleIncrement = (Math.random() * 0.07) + 0.05;
      this.velocityY = 1 + Math.random() * 2;
      this.opacity = 1;
    }
    update() {
      this.y += this.velocityY;
      this.tiltAngle += this.tiltAngleIncrement;
      this.tilt = Math.sin(this.tiltAngle) * 15;
      this.opacity -= 0.005;
    }
    draw(ctx) {
      ctx.beginPath();
      ctx.lineWidth = this.size / 2;
      ctx.strokeStyle = this.color;
      ctx.globalAlpha = this.opacity;
      ctx.moveTo(this.x + this.tilt + this.size/2, this.y);
      ctx.lineTo(this.x + this.tilt, this.y + this.tilt + this.size/2);
      ctx.stroke();
      ctx.globalAlpha = 1;
    }
  }

  function resizeCanvas() {
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  function triggerConfetti() {
    if (confettiRunning) return;
    confettiRunning = true;
    confettiPieces = [];

    const count = 100;
    for (let i = 0; i < count; i++) {
      confettiPieces.push(new ConfettiPiece(Math.random() * confettiCanvas.width, Math.random() * confettiCanvas.height - confettiCanvas.height));
    }

    let animationId;
    function animate() {
      confettiCtx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      confettiPieces.forEach((p, i) => {
        p.update();
        if (p.opacity <= 0 || p.y > confettiCanvas.height) {
          confettiPieces[i] = new ConfettiPiece(Math.random() * confettiCanvas.width, -10);
        }
        p.draw(confettiCtx);
      });
      animationId = requestAnimationFrame(animate);
    }
    animate();

    setTimeout(() => {
      cancelAnimationFrame(animationId);
      confettiCtx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      confettiRunning = false;
    }, 3000);
  }

  // Sad face animation
  let sadFaceTimeout = null;
  function triggerSadFace() {
    if (sadFaceTimeout) {
      clearTimeout(sadFaceTimeout);
    }
    sadFaceEl.style.opacity = 1;
    sadFaceTimeout = setTimeout(() => {
      sadFaceEl.style.opacity = 0;
    }, 1500);
  }

})()
</script>
</body>
</html>